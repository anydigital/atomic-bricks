/**
 * @anydigital/atomic-bricks
 * Framework-agnostic CSS utility helpers
 */

/* Prevent horizontal overflow and scrolling, modern way */

html, body {
  overflow-x: clip;
}

body {
  /* Ensures body takes at least the full height of the viewport (using dynamic viewport height for better mobile support) */
  min-height: 100dvh;

  /* Enable hyphenation and font smoothing for better typography */
  hyphens: auto;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;

  /* Make the body a flex container with column layout; main fills space */
  display: flex;
  flex-direction: column;
}

body  > main {
    display: flex;
    flex-direction: column;
    flex-grow: 1;
  }

.prose h2:not([class]),.prose h3:not([class]),.prose h4:not([class]) {
    position: relative;
  }

.prose h2:not([class])::before {
      content: '';
      display: block;
      position: absolute;
      background-color: whitesmoke;
    }

.prose h3:not([class])::before {
      content: '';
      display: block;
      position: absolute;
      background-color: whitesmoke;
    }

.prose h4:not([class])::before {
      content: '';
      display: block;
      position: absolute;
      background-color: whitesmoke;
    }

.prose h2:not([class]) {
    margin-top: 2em;
  }

.prose h2:not([class])::before {
      width: 100vw;
        left: 50%;
      height: 0.4em;
        top: -1em;
        transform: translateX(-50%);
    }

.prose h3:not([class])::before {
      width: 10em;
        right: 100%;
        margin-right: 0.5em;
      height: 0.3em;
        top: 50%;
        transform: translateY(-50%);
      background: linear-gradient(to left, gainsboro, whitesmoke 10%, transparent);
    }

.prose h4:not([class])::before {
      width: 10em;
        right: 100%;
        margin-right: 0.5em;
      height: 0.3em;
        top: 50%;
        transform: translateY(-50%);
      background: linear-gradient(to left, gainsboro, whitesmoke 10%, transparent);
    }

.prose h4:not([class])::before {
      height: 0.2em;
    }

/* Breakout CSS - Framework-agnostic utilities for breaking out images and figures */

.breakout {
  padding-inline: 10%;

  /* Direct children, or wrapped in <p> for Markdown support */
}

.breakout > img:not(does-not-exist):not(.does-not-exist),.breakout > picture:not(does-not-exist):not(.does-not-exist),.breakout > figure:not(does-not-exist):not(.does-not-exist),.breakout > canvas:not(does-not-exist):not(.does-not-exist),.breakout > audio:not(does-not-exist):not(.does-not-exist),.breakout > table:not(does-not-exist):not(.does-not-exist),.breakout > pre:not(does-not-exist):not(.does-not-exist),.breakout > iframe:not(does-not-exist):not(.does-not-exist),.breakout > object:not(does-not-exist):not(.does-not-exist),.breakout > embed:not(does-not-exist):not(.does-not-exist),.breakout > video:not(does-not-exist):not(.does-not-exist),.breakout > .breakout-item:not(does-not-exist),.breakout > .breakout-item-max:not(does-not-exist),.breakout > p > img:not(.does-not-exist),.breakout > p > picture:not(.does-not-exist),.breakout > p > figure:not(.does-not-exist),.breakout > p > canvas:not(.does-not-exist),.breakout > p > audio:not(.does-not-exist),.breakout > p > table:not(.does-not-exist),.breakout > p > pre:not(.does-not-exist),.breakout > p > iframe:not(.does-not-exist),.breakout > p > object:not(.does-not-exist),.breakout > p > embed:not(.does-not-exist),.breakout > p > video:not(.does-not-exist),.breakout > p > .breakout-item,.breakout > p > .breakout-item-max {
      width: -moz-fit-content;
      width: fit-content;
      min-width: 100%;
      max-width: 125%;
      margin-left: 50%;
      transform: translateX(-50%);
    }

/* Respect inline blocks' min-width */

.breakout > img:not(does-not-exist),.breakout > picture:not(does-not-exist),.breakout > figure:not(does-not-exist),.breakout > canvas:not(does-not-exist),.breakout > audio:not(does-not-exist),.breakout > p > img,.breakout > p > picture,.breakout > p > figure,.breakout > p > canvas,.breakout > p > audio {
      min-width: auto;
    }

/* Max out the width of the element */

.breakout > .breakout-item-max:not(does-not-exist),.breakout > p > .breakout-item-max {
      width: 125% !important; /* @TODO: !important for cases like figure.breakout-item-max */
    }

/* @TODO: Allow non-direct children. */
