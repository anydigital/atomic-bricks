/**
 * @anydigital/bricks
 * Framework-agnostic CSS utility helpers
 */

/* Prevent horizontal overflow and scrolling, modern way */

html,
body {
  overflow-x: clip;
}

body {
  /* Ensures body takes at least the full height of the viewport (using dynamic viewport height for better mobile support) */
  min-height: 100dvh;

  /* Enable hyphenation and font smoothing for better typography */
  hyphens: auto;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;

  /* Make the body a flex container with column layout; main fills space */
  display: flex;
  flex-direction: column;
}

body  > main {
    flex-grow: 1;
  }

/* Disable hyphenation for links */

body a {
    hyphens: none;
  }

.prose {
  /* Container-like behavior with padding and auto margins */
  width: 100%;
  padding: 1rem;
  margin-inline: auto;
}

.prose a {
    text-underline-offset: 0.1em;
    text-decoration-thickness: 1px;
    /* Don't underline links that point to anchors */
  }

.prose a[href^="#"] {
      text-decoration: none;
    }

.prose a:hover {
      text-decoration-thickness: 2px;
    }

.prose a small,.prose a sup,.prose a sub {
      font-weight: 300;
      /* Workaround to prevent underline */
      display: inline-block;
    }

/* Helper to insert icons in links */

.prose a i {
      height: 1em;
      vertical-align: -10%;
      margin-right: 0.25em;
      font-style: normal;
      /* Workaround to prevent underline */
      display: inline-block;
    }

.prose a i img {
        height: 100%;
        margin: 0 !important;
      }

.prose h1 {
    margin-bottom: 0.5em !important;
  }

.prose h1 small,.prose h1 sup,.prose h1 sub {
      font-size: 0.5em;
      font-weight: 300;
    }

.prose table {
    display: block;
    overflow-x: auto;
  }

@media (max-width: 767px) {

.prose table {
      padding-inline: 1.5em;
  }
    }

.prose th,.prose td {
    padding-top: 1em;
    padding-bottom: 1em;
    vertical-align: top;
    /* Workaround to widen particular columns */
  }

.prose th hr,.prose td hr {
      min-width: 25ch;
      margin: 0;
      visibility: hidden;
    }

/* Workaround for headings in Markdown tables */

.prose th big,.prose td big {
      font-weight: bold;
    }

.prose th img,.prose td img {
      margin-top: 0;
      margin-bottom: 0.75em;
    }

.prose blockquote {
    font-weight: 300;
  }

.prose blockquote  + figcaption {
      margin-top: -1em;
      text-align: right;
      font-style: italic;
      font-weight: 300;
    }

.prose blockquote + figcaption::before {
        content: "â€”";
        margin-right: 0.25em;
      }

.prose code[data-caption]::before {
      content: attr(data-caption);
      display: block;
      margin-bottom: 1.5em;
      opacity: 0.5;
      font-style: italic;
    }

/* Breakout CSS - Framework-agnostic utilities for breaking out images and figures */

.breakout {
  padding-inline: 10%;

  /* Direct children, or wrapped in <p> for Markdown support */
}

.breakout > img:not(does-not-exist):not(.does-not-exist),.breakout > picture:not(does-not-exist):not(.does-not-exist),.breakout > figure:not(does-not-exist):not(.does-not-exist),.breakout > canvas:not(does-not-exist):not(.does-not-exist),.breakout > audio:not(does-not-exist):not(.does-not-exist),.breakout > table:not(does-not-exist):not(.does-not-exist),.breakout > pre:not(does-not-exist):not(.does-not-exist),.breakout > iframe:not(does-not-exist):not(.does-not-exist),.breakout > object:not(does-not-exist):not(.does-not-exist),.breakout > embed:not(does-not-exist):not(.does-not-exist),.breakout > video:not(does-not-exist):not(.does-not-exist),.breakout > .breakout-item:not(does-not-exist),.breakout > .breakout-item-max:not(does-not-exist),.breakout > p > img:not(.does-not-exist),.breakout > p > picture:not(.does-not-exist),.breakout > p > figure:not(.does-not-exist),.breakout > p > canvas:not(.does-not-exist),.breakout > p > audio:not(.does-not-exist),.breakout > p > table:not(.does-not-exist),.breakout > p > pre:not(.does-not-exist),.breakout > p > iframe:not(.does-not-exist),.breakout > p > object:not(.does-not-exist),.breakout > p > embed:not(.does-not-exist),.breakout > p > video:not(.does-not-exist),.breakout > p > .breakout-item,.breakout > p > .breakout-item-max {
      width: -moz-fit-content;
      width: fit-content;
      min-width: 100%;
      max-width: 125%;
      margin-left: 50%;
      transform: translateX(-50%);
    }

/* Respect inline blocks' min-width */

.breakout > img:not(does-not-exist),.breakout > picture:not(does-not-exist),.breakout > figure:not(does-not-exist),.breakout > canvas:not(does-not-exist),.breakout > audio:not(does-not-exist),.breakout > p > img,.breakout > p > picture,.breakout > p > figure,.breakout > p > canvas,.breakout > p > audio {
      min-width: auto;
    }

/* Max out the width of the element */

.breakout > .breakout-item-max:not(does-not-exist),.breakout > p > .breakout-item-max {
      width: 125% !important; /* !important is for cases like figure.breakout-item-max @TODO */
    }

.breakout-headings h2:not([class]),.breakout-headings h3:not([class]),.breakout-headings h4:not([class]),.breakout-headings hr {
    position: relative;
  }

.breakout-headings h2:not([class])::before {
      content: "";
      display: block;
      position: absolute;
      background-color: rgba(0, 0, 0, 5%);
    }

.breakout-headings h3:not([class])::before {
      content: "";
      display: block;
      position: absolute;
      background-color: rgba(0, 0, 0, 5%);
    }

.breakout-headings h4:not([class])::before {
      content: "";
      display: block;
      position: absolute;
      background-color: rgba(0, 0, 0, 5%);
    }

.breakout-headings hr:not(.does-not-exist)::before {
      content: "";
      display: block;
      position: absolute;
      background-color: rgba(0, 0, 0, 5%);
    }

.breakout-headings h2:not([class])::before {
      width: 10em;
      right: 100%;
      margin-right: 1rem;
      height: 0.3em;
      top: 50%;
      transform: translateY(-50%);
      background: linear-gradient(
        to left,
        rgba(0, 0, 0, 10%),
        rgba(0, 0, 0, 5%) 10%,
        transparent
      );
    }

.breakout-headings h3:not([class])::before {
      width: 10em;
      right: 100%;
      margin-right: 1rem;
      height: 0.3em;
      top: 50%;
      transform: translateY(-50%);
      background: linear-gradient(
        to left,
        rgba(0, 0, 0, 10%),
        rgba(0, 0, 0, 5%) 10%,
        transparent
      );
    }

.breakout-headings h4:not([class])::before {
      width: 10em;
      right: 100%;
      margin-right: 1rem;
      height: 0.3em;
      top: 50%;
      transform: translateY(-50%);
      background: linear-gradient(
        to left,
        rgba(0, 0, 0, 10%),
        rgba(0, 0, 0, 5%) 10%,
        transparent
      );
    }

.breakout-headings hr {
    height: 0.75rem;
    border: none;
    overflow: visible;
  }

.breakout-headings hr::before {
      width: 100vw;
      left: 50%;
      height: 100%;
      transform: translateX(-50%);
    }

.breakout-headings hr + h2::before {
      display: none !important;
    }

.breakout-headings hr + h3::before {
      display: none !important;
    }

.breakout-headings hr + h4::before {
      display: none !important;
    }

/* after prose to override it */

/* Prism.js */

.token.treeview-part .entry-line {
    width: 2.5em !important;
    opacity: 25%;
  }

.token.treeview-part .entry-name:last-child {
    opacity: 50%;
  }

.token.treeview-part .entry-name:last-child::before {
      display: none !important;
    }

/* Utility classes */

.invert ::-webkit-scrollbar {
    filter: invert(1) !important;
  }
